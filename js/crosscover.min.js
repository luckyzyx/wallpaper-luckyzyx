/*!
 * crosscover v1.1.0
 * Carousel of a simple background image using jquery and animate.css.
 * http://git.blivesta.com/crosscover
 * License : MIT
 * Author : blivesta <enmt@blivesta.com> (http://blivesta.com/)
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";var s="crosscover",a={init:function(n){return n=t.extend({inClass:"fade-in",outClass:"fade-out",interval:5e3,startIndex:0,autoPlay:!0,dotsNav:!0,controller:!1,controllerClass:"crosscover-controller",prevClass:"crosscover-prev",nextClass:"crosscover-next",playerClass:"crosscover-player",playerInnerHtml:'<span class="crosscover-icon-player"></span>',prevInnerHtml:'<span class="crosscover-icon-prev"></span>',nextInnerHtml:'<span class="crosscover-icon-next"></span>'},n),a.settings={currentIndex:n.startIndex,timer:null,coverBaseClass:"crosscover-item",coverWaitClass:"is-wait",coverActiveClass:"is-active",playerActiveClass:"is-playing",dotsNavClass:"crosscover-dots"},this.each(function(){var e=this,r=t(this),o=r.data(s),l=t(window),i=r.children(".crosscover-list").children("."+a.settings.coverBaseClass);o||(n=t.extend({},n),r.data(s,{options:n}),n.dotsNav&&a.createDots.call(e,i),n.controller&&a.createControler.call(e,i),a.setup.call(e,i),l.on("focus",function(){a.autoPlayStart.call(e,i)}).on("blur",function(){a.autoPlayStop.call(e)}))})},setup:function(n){var e=this,r=t(this);r.data(s).options;return n.each(function(s){var n=t(this),e=n.find("img").attr("src");n.addClass(a.settings.coverBaseClass,a.settings.coverWaitClass).css({"background-image":"url("+e+")"})}),a.slideStart.call(e,n)},slideStart:function(t){var s=this;a.autoPlayStart.call(s,t),a.show.call(s,t)},createDots:function(n){var e=this,r=t(this),o=(r.data(s).options,n.length);r.append(t("<ul>").addClass(a.settings.dotsNavClass));for(var l=0;l<o;l++)r.children("."+a.settings.dotsNavClass).append(t("<li>").addClass("crosscover-dots-nav-"+l).append(t("<button>")));a.addDots.call(e,n)},addDots:function(n){var e=this,r=t(this),o=(r.data(s).options,r.children("."+a.settings.dotsNavClass)),l=o.children("li").children("button");l.on("click."+s,function(s){return a.toggle.call(e,n,"dots",t(this).parent("li").index())})},createControler:function(n){var e=this,r=t(this),o=r.data(s).options,l=o.autoPlay?a.settings.playerActiveClass:null;return r.append(t("<div>").attr({"data-crosscover-controller":""}).addClass(o.controllerClass).append(t("<button>").attr({"data-crosscover-prev":""}).addClass(o.prevClass).html(o.prevInnerHtml)).append(t("<button>").attr({"data-crosscover-player":""}).addClass(o.playerClass).addClass(l).html(o.playerInnerHtml)).append(t("<button>").attr({"data-crosscover-next":""}).addClass(o.nextClass).html(o.nextInnerHtml))),a.addControler.call(e,n)},addControler:function(n){var e=this,r=t(this),o=(r.data(s).options,r.children("[data-crosscover-controller]")),l=o.children("[data-crosscover-prev]"),i=o.children("[data-crosscover-next]"),c=o.children("[data-crosscover-player]");c.on("click."+s,function(s){return t(this).blur(),a.playToggle.call(e,n,t(this))}),l.on("click."+s,function(s){return t(this).blur(),a.toggle.call(e,n,"prev")}),i.on("click."+s,function(s){return t(this).blur(),a.toggle.call(e,n,"next")})},playToggle:function(n){var e=this,r=t(this),o=r.data(s).options,l=r.find("[data-crosscover-player]");return o.autoPlay?(o.autoPlay=!1,l.removeClass(a.settings.playerActiveClass).addClass(o.playClass),a.autoPlayStop.call(e)):(o.autoPlay=!0,l.addClass(a.settings.playerActiveClass),a.autoPlayStart.call(e,n))},toggle:function(n,e,r){var o=this,l=t(this);l.data(s).options;return a.hide.call(o,n),"next"===e?a.settings.currentIndex++:"prev"===e?a.settings.currentIndex--:"dots"===e&&(a.settings.currentIndex=r),a.settings.currentIndex>=n.length?a.settings.currentIndex=0:a.settings.currentIndex<=-1&&(a.settings.currentIndex=n.length-1),a.autoPlayStart.call(o,n),a.show.call(o,n)},show:function(n){var e=t(this),r=e.data(s).options;return r.dotsNav&&e.children("."+a.settings.dotsNavClass).children("li").eq(a.settings.currentIndex).addClass("is-active").children("button").prop("disabled",!0),n.eq(a.settings.currentIndex).addClass(a.settings.coverActiveClass).removeClass(a.settings.coverWaitClass).addClass(r.inClass).csscallbacks("animationEnd",function(){t(this).removeClass(r.inClass+" "+a.settings.coverWaitClass).addClass(a.settings.coverActiveClass)})},hide:function(n){var e=t(this),r=e.data(s).options;return r.dotsNav&&e.children("."+a.settings.dotsNavClass).children("li").eq(a.settings.currentIndex).removeClass("is-active").children("button").prop("disabled",!1),n.eq(a.settings.currentIndex).removeClass(a.settings.coverActiveClass).addClass(r.outClass).csscallbacks("animationEnd",function(){t(this).removeClass(r.outClass+" "+a.settings.coverActiveClass).addClass(a.settings.coverWaitClass)})},autoPlayStart:function(n){var e=this,r=t(this),o=r.data(s).options;return o.autoPlay&&(a.autoPlayStop.call(e),a.settings.timer=setTimeout(function(){a.toggle.call(e,n,"next"),a.autoPlayStart.call(e,n)},o.interval)),e},autoPlayStop:function(){return clearTimeout(a.settings.timer)},currentIndex:function(){return a.settings.currentIndex}};t.fn.crosscover=function(n){return a[n]?a[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery."+s):a.init.apply(this,arguments)},t.fn.csscallbacks=function(s,a){var n="animationstart webkitAnimationStart oAnimationStart",e="animationend webkitAnimationEnd oAnimationEnd",r="transitionend webkitTransitionEnd oTransitionEnd";return"animationStart"===s?s=n:"animationEnd"===s?s=e:"transitionEnd"===s&&(s=r),this.each(function(n){var e=t(this);e.on(s,function(){return e.off(s),a.call(this)})})}});